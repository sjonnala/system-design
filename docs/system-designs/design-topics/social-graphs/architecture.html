<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Graphs System Design Blueprint</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .header h1 {
            font-size: 2.5em;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 1.3em;
            color: #667eea;
            font-weight: 600;
        }

        .tags {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .tag {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
        }

        .tag.scale { background: #dbeafe; color: #1e40af; }
        .tag.social { background: #fce7f3; color: #be123c; }
        .tag.realtime { background: #dcfce7; color: #15803d; }

        .architecture {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .section {
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e2e8f0;
            position: relative;
            min-height: 200px;
        }

        .section-title {
            font-weight: 700;
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #1a202c;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .component {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border: 2px solid #cbd5e0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .component:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        .component-name {
            font-weight: 700;
            font-size: 1em;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .component-details {
            font-size: 0.85em;
            color: #4a5568;
            line-height: 1.6;
        }

        .component-details ul {
            margin-left: 15px;
            margin-top: 5px;
        }

        .component-details li {
            margin: 3px 0;
        }

        /* Color themes for different sections */
        .client-section {
            background: linear-gradient(135deg, #bfdbfe 0%, #60a5fa 100%);
            grid-column: span 12;
        }

        .cdn-section {
            background: linear-gradient(135deg, #a5f3fc 0%, #22d3ee 100%);
            grid-column: span 6;
        }

        .lb-section {
            background: linear-gradient(135deg, #c7d2fe 0%, #818cf8 100%);
            grid-column: span 6;
        }

        .gateway-section {
            background: linear-gradient(135deg, #fecaca 0%, #f87171 100%);
            grid-column: span 12;
        }

        .api-services-section {
            background: linear-gradient(135deg, #d9f99d 0%, #84cc16 100%);
            grid-column: span 12;
        }

        .feed-section {
            background: linear-gradient(135deg, #fbcfe8 0%, #f472b6 100%);
            grid-column: span 6;
        }

        .graph-section {
            background: linear-gradient(135deg, #fde047 0%, #facc15 100%);
            grid-column: span 6;
        }

        .cache-section {
            background: linear-gradient(135deg, #ddd6fe 0%, #a78bfa 100%);
            grid-column: span 4;
        }

        .database-section {
            background: linear-gradient(135deg, #fed7aa 0%, #fb923c 100%);
            grid-column: span 8;
        }

        .media-section {
            background: linear-gradient(135deg, #bae6fd 0%, #38bdf8 100%);
            grid-column: span 6;
        }

        .search-section {
            background: linear-gradient(135deg, #fef08a 0%, #fde047 100%);
            grid-column: span 6;
        }

        .analytics-section {
            background: linear-gradient(135deg, #e9d5ff 0%, #c084fc 100%);
            grid-column: span 6;
        }

        .queue-section {
            background: linear-gradient(135deg, #fca5a5 0%, #ef4444 100%);
            grid-column: span 6;
        }

        .monitoring-section {
            background: linear-gradient(135deg, #99f6e4 0%, #2dd4bf 100%);
            grid-column: span 12;
        }

        .flow-indicator {
            font-size: 0.75em;
            color: #6366f1;
            font-weight: 600;
            margin: 10px 0;
            padding: 5px 10px;
            background: rgba(99, 102, 241, 0.1);
            border-radius: 5px;
            display: inline-block;
        }

        .key-metrics {
            background: #fef3c7;
            padding: 15px;
            border-radius: 10px;
            margin-top: 30px;
            border: 2px solid #fbbf24;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .metric-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #6366f1;
        }

        .metric-value {
            font-size: 1.5em;
            font-weight: 700;
            color: #6366f1;
        }

        .metric-label {
            font-size: 0.9em;
            color: #4a5568;
            margin-top: 5px;
        }

        .code-snippet {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            margin-top: 10px;
            overflow-x: auto;
        }

        .highlight {
            color: #fbbf24;
            font-weight: 600;
        }

        @media (max-width: 1400px) {
            .architecture {
                grid-template-columns: repeat(6, 1fr);
            }
            .section { grid-column: span 6 !important; }
        }

        @media (max-width: 768px) {
            .architecture {
                grid-template-columns: 1fr;
            }
            .section { grid-column: span 1 !important; }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>üì± Social Graphs System Design Blueprint</h1>
        <div class="subtitle">Instagram + Twitter + Facebook + Reddit Architecture</div>
        <div class="tags">
            <span class="tag scale">Massive Scale</span>
            <span class="tag social">Social Network</span>
            <span class="tag realtime">Real-time Updates</span>
        </div>
    </div>

    <div class="architecture">
        <!-- Client Layer -->
        <div class="section client-section">
            <div class="section-title">üë• CLIENT LAYER</div>
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
                <div class="component">
                    <div class="component-name">üì± iOS App</div>
                    <div class="component-details">
                        <ul>
                            <li>Swift / SwiftUI</li>
                            <li>Push notifications</li>
                            <li>Image optimization</li>
                        </ul>
                    </div>
                </div>
                <div class="component">
                    <div class="component-name">ü§ñ Android App</div>
                    <div class="component-details">
                        <ul>
                            <li>Kotlin / Jetpack</li>
                            <li>FCM integration</li>
                            <li>Local caching</li>
                        </ul>
                    </div>
                </div>
                <div class="component">
                    <div class="component-name">üíª Web App</div>
                    <div class="component-details">
                        <ul>
                            <li>React / Next.js</li>
                            <li>WebSockets</li>
                            <li>Progressive Web App</li>
                        </ul>
                    </div>
                </div>
                <div class="component">
                    <div class="component-name">üîå API Clients</div>
                    <div class="component-details">
                        <ul>
                            <li>Third-party apps</li>
                            <li>OAuth 2.0</li>
                            <li>Rate limited</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="flow-indicator">‚Üì HTTPS / WebSocket Connections</div>
        </div>

        <!-- CDN / Edge -->
        <div class="section cdn-section">
            <div class="section-title">‚ö° CDN / EDGE NETWORK</div>
            <div class="component">
                <div class="component-name">CloudFront / Fastly / Akamai</div>
                <div class="component-details">
                    <ul>
                        <li><strong>Static Assets:</strong> Profile pics, post images, videos</li>
                        <li><strong>Edge Caching:</strong> Popular content cached globally</li>
                        <li><strong>Image Transformation:</strong> Resize, compress on-the-fly</li>
                        <li><strong>DDoS Protection:</strong> AWS Shield, Cloudflare</li>
                        <li><strong>SSL/TLS:</strong> Termination at edge</li>
                        <li><strong>Geo-distribution:</strong> 200+ edge locations</li>
                    </ul>
                    <div class="code-snippet">
Cache-Control: public, max-age=31536000
CDN-Cache-Status: HIT
Image-Transformations: width=500,quality=85</div>
                </div>
            </div>
        </div>

        <!-- Load Balancer -->
        <div class="section lb-section">
            <div class="section-title">‚öñÔ∏è LOAD BALANCING</div>
            <div class="component">
                <div class="component-name">Application Load Balancer</div>
                <div class="component-details">
                    <strong>Strategy:</strong>
                    <ul>
                        <li>Layer 7 load balancing</li>
                        <li>Sticky sessions (user affinity)</li>
                        <li>Health checks (every 10s)</li>
                        <li>Auto-scaling triggers</li>
                        <li>SSL offloading</li>
                        <li>WebSocket support</li>
                    </ul>
                    <strong>Rate Limiting:</strong>
                    <ul>
                        <li>Per user: 1000 req/min</li>
                        <li>Per IP: 100 req/sec</li>
                        <li>API: Custom quotas</li>
                    </ul>
                </div>
            </div>
            <div class="flow-indicator">‚Üì Route to API Gateway</div>
        </div>

        <!-- API Gateway -->
        <div class="section gateway-section">
            <div class="section-title">üö™ API GATEWAY</div>
            <div class="component">
                <div class="component-name">Kong / AWS API Gateway / GraphQL</div>
                <div class="component-details">
                    <strong>Responsibilities:</strong>
                    <ul>
                        <li><strong>Authentication:</strong> JWT tokens, OAuth 2.0, Session cookies</li>
                        <li><strong>Authorization:</strong> Role-based access control (RBAC)</li>
                        <li><strong>Rate Limiting:</strong> Token bucket per user/IP</li>
                        <li><strong>Request Routing:</strong> Microservice discovery</li>
                        <li><strong>API Versioning:</strong> /v1, /v2 endpoints</li>
                        <li><strong>Request/Response Transformation</strong></li>
                        <li><strong>GraphQL Gateway:</strong> Federated queries across services</li>
                        <li><strong>Metrics & Logging:</strong> Distributed tracing (Jaeger)</li>
                    </ul>
                    <div class="code-snippet">
// GraphQL Query Example
query UserFeed($userId: ID!, $limit: Int) {
  user(id: $userId) {
    feed(limit: $limit) {
      posts {
        id, content, author, likes, comments
        media { url, type }
      }
    }
  }
}</div>
                </div>
            </div>
        </div>

        <!-- API Services -->
        <div class="section api-services-section">
            <div class="section-title">üîß MICROSERVICES LAYER</div>

            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                <div class="component">
                    <div class="component-name">User Service</div>
                    <div class="component-details">
                        <strong>Responsibilities:</strong>
                        <ul>
                            <li>User registration & auth</li>
                            <li>Profile management</li>
                            <li>Settings & preferences</li>
                            <li>Account verification</li>
                        </ul>
                        <div class="code-snippet">
POST /users/register
GET /users/{userId}/profile
PUT /users/{userId}/settings</div>
                    </div>
                </div>

                <div class="component">
                    <div class="component-name">Post Service</div>
                    <div class="component-details">
                        <strong>Responsibilities:</strong>
                        <ul>
                            <li>Create/edit/delete posts</li>
                            <li>Post metadata</li>
                            <li>Hashtag processing</li>
                            <li>Content moderation</li>
                        </ul>
                        <div class="code-snippet">
POST /posts
GET /posts/{postId}
DELETE /posts/{postId}</div>
                    </div>
                </div>

                <div class="component">
                    <div class="component-name">Social Graph Service</div>
                    <div class="component-details">
                        <strong>Responsibilities:</strong>
                        <ul>
                            <li>Follow/unfollow</li>
                            <li>Friendship management</li>
                            <li>Graph traversal</li>
                            <li>Follower lists</li>
                        </ul>
                        <div class="code-snippet">
POST /users/{id}/follow/{targetId}
GET /users/{id}/followers
GET /users/{id}/following</div>
                    </div>
                </div>

                <div class="component">
                    <div class="component-name">Notification Service</div>
                    <div class="component-details">
                        <strong>Responsibilities:</strong>
                        <ul>
                            <li>Push notifications</li>
                            <li>Email notifications</li>
                            <li>In-app notifications</li>
                            <li>Notification preferences</li>
                        </ul>
                        <div class="code-snippet">
// Event-driven notifications
onLike ‚Üí push("X liked your post")
onFollow ‚Üí push("X followed you")</div>
                    </div>
                </div>

                <div class="component">
                    <div class="component-name">Comment Service</div>
                    <div class="component-details">
                        <strong>Responsibilities:</strong>
                        <ul>
                            <li>Create/edit comments</li>
                            <li>Nested replies</li>
                            <li>Comment threads</li>
                            <li>Spam detection</li>
                        </ul>
                        <div class="code-snippet">
POST /posts/{id}/comments
GET /posts/{id}/comments
DELETE /comments/{commentId}</div>
                    </div>
                </div>

                <div class="component">
                    <div class="component-name">Like/Reaction Service</div>
                    <div class="component-details">
                        <strong>Responsibilities:</strong>
                        <ul>
                            <li>Like/unlike posts</li>
                            <li>Reactions (üòÇ‚ù§Ô∏èüòÆ)</li>
                            <li>Like count aggregation</li>
                            <li>Real-time updates</li>
                        </ul>
                        <div class="code-snippet">
POST /posts/{id}/like
GET /posts/{id}/likes/count
GET /posts/{id}/likers</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feed Generation -->
        <div class="section feed-section">
            <div class="section-title">üì∞ FEED GENERATION ENGINE</div>
            <div class="component">
                <div class="component-name">Timeline Service</div>
                <div class="component-details">
                    <strong>Feed Strategies:</strong>
                    <ul>
                        <li><strong>Fan-out on Write (Twitter):</strong> Pre-compute feeds on post creation</li>
                        <li><strong>Fan-out on Read (Instagram):</strong> Generate feed on user request</li>
                        <li><strong>Hybrid (Facebook):</strong> Pre-compute for most, on-demand for influencers</li>
                    </ul>
                    <div class="code-snippet">
// Fan-out on Write (Push Model)
onPostCreated(post, authorId):
  followers = getFollowers(authorId)
  for follower in followers:
    prependToFeed(follower.feedCache, post)

// Fan-out on Read (Pull Model)
getUserFeed(userId):
  followingList = getFollowing(userId)
  recentPosts = aggregatePosts(followingList, limit=100)
  return rankPosts(recentPosts)</div>
                    <strong>Ranking Algorithm:</strong>
                    <ul>
                        <li>Time decay (recency)</li>
                        <li>Engagement score (likes + comments)</li>
                        <li>User affinity (interaction history)</li>
                        <li>Content type preference</li>
                        <li>Diversity (avoid single-author spam)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Graph Database -->
        <div class="section graph-section">
            <div class="section-title">üï∏Ô∏è GRAPH DATABASE</div>
            <div class="component">
                <div class="component-name">Neo4j / Amazon Neptune</div>
                <div class="component-details">
                    <strong>Graph Modeling:</strong>
                    <div class="code-snippet">
// Cypher Query (Neo4j)
// Find mutual friends
MATCH (user:User {id: $userId})-[:FOLLOWS]->(friend)
      -[:FOLLOWS]->(mutualFriend)-[:FOLLOWS]->(user)
RETURN mutualFriend

// Friend suggestions (2nd degree connections)
MATCH (user:User {id: $userId})-[:FOLLOWS]->()
      -[:FOLLOWS]->(suggestion)
WHERE NOT (user)-[:FOLLOWS]->(suggestion)
RETURN suggestion, count(*) as mutualConnections
ORDER BY mutualConnections DESC
LIMIT 10</div>
                    <strong>Use Cases:</strong>
                    <ul>
                        <li>Social graph traversal</li>
                        <li>Friend suggestions</li>
                        <li>Mutual friends</li>
                        <li>Shortest path between users</li>
                        <li>Community detection</li>
                        <li>Influencer identification</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Cache Layer -->
        <div class="section cache-section">
            <div class="section-title">üíæ CACHE LAYER</div>
            <div class="component">
                <div class="component-name">Redis Cluster</div>
                <div class="component-details">
                    <strong>Cached Data:</strong>
                    <ul>
                        <li><strong>User Sessions:</strong> TTL: 24 hours</li>
                        <li><strong>User Profiles:</strong> TTL: 1 hour</li>
                        <li><strong>Feed Cache:</strong> TTL: 5 minutes</li>
                        <li><strong>Post Metadata:</strong> TTL: 30 minutes</li>
                        <li><strong>Follower Counts:</strong> TTL: 10 minutes</li>
                        <li><strong>Hot Posts:</strong> TTL: 1 hour</li>
                    </ul>
                    <div class="code-snippet">
# Redis Data Structures
HSET user:{userId} profile {json}
ZADD feed:{userId} {timestamp} {postId}
INCR post:{postId}:likes
SETEX session:{token} 86400 {userId}
LPUSH timeline:{userId} {postId}</div>
                    <strong>Performance:</strong>
                    <ul>
                        <li>Throughput: 1M ops/sec</li>
                        <li>Latency: <1ms (P99)</li>
                        <li>Hit rate: 85-90%</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Database Layer -->
        <div class="section database-section">
            <div class="section-title">üóÑÔ∏è DATABASE LAYER</div>
            <div class="component">
                <div class="component-name">Sharded PostgreSQL / Cassandra</div>
                <div class="component-details">
                    <strong>Schema Design (PostgreSQL):</strong>
                    <div class="code-snippet">
-- Users Table (Sharded by user_id)
CREATE TABLE users (
  user_id BIGSERIAL PRIMARY KEY,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255),
  profile_pic_url TEXT,
  bio TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- Posts Table (Sharded by post_id)
CREATE TABLE posts (
  post_id BIGSERIAL PRIMARY KEY,
  user_id BIGINT NOT NULL,
  content TEXT,
  media_urls TEXT[],
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP,
  likes_count INT DEFAULT 0,
  comments_count INT DEFAULT 0
);
CREATE INDEX idx_posts_user_created
  ON posts(user_id, created_at DESC);

-- Follows Table (Sharded by follower_id)
CREATE TABLE follows (
  follower_id BIGINT NOT NULL,
  following_id BIGINT NOT NULL,
  created_at TIMESTAMP DEFAULT NOW(),
  PRIMARY KEY (follower_id, following_id)
);
CREATE INDEX idx_follows_following
  ON follows(following_id, created_at DESC);</div>
                    <strong>Sharding Strategy:</strong>
                    <ul>
                        <li><strong>Users:</strong> Hash(user_id) % num_shards</li>
                        <li><strong>Posts:</strong> Hash(post_id) % num_shards</li>
                        <li><strong>Follows:</strong> Hash(follower_id) % num_shards</li>
                        <li>Initial: 64 shards ‚Üí Scale to 256+</li>
                    </ul>
                </div>
            </div>

            <div class="component">
                <div class="component-name">Cassandra (Time-Series Data)</div>
                <div class="component-details">
                    <strong>Use Cases:</strong>
                    <ul>
                        <li>User feeds (pre-computed timelines)</li>
                        <li>Activity streams</li>
                        <li>Event logs</li>
                    </ul>
                    <div class="code-snippet">
-- Cassandra Schema
CREATE TABLE user_feed (
  user_id BIGINT,
  post_timestamp TIMESTAMP,
  post_id BIGINT,
  author_id BIGINT,
  content TEXT,
  PRIMARY KEY (user_id, post_timestamp)
) WITH CLUSTERING ORDER BY (post_timestamp DESC);</div>
                </div>
            </div>
        </div>

        <!-- Media Storage -->
        <div class="section media-section">
            <div class="section-title">üì∏ MEDIA STORAGE</div>
            <div class="component">
                <div class="component-name">Object Storage (S3 / GCS)</div>
                <div class="component-details">
                    <strong>Media Pipeline:</strong>
                    <div class="code-snippet">
1. User uploads image/video
2. Upload to S3 (original)
3. Trigger Lambda/Cloud Function
4. Generate thumbnails (multiple sizes)
5. Compress/optimize (WebP, HEIC)
6. Store variants in S3
7. Update CDN cache
8. Return URLs to client</div>
                    <strong>Storage Tiers:</strong>
                    <ul>
                        <li><strong>Hot:</strong> Recent uploads (S3 Standard)</li>
                        <li><strong>Warm:</strong> 1-6 months old (S3 IA)</li>
                        <li><strong>Cold:</strong> >6 months (S3 Glacier)</li>
                    </ul>
                    <strong>Optimizations:</strong>
                    <ul>
                        <li>Lazy loading (progressive JPEG)</li>
                        <li>Adaptive bitrate (videos)</li>
                        <li>Image resizing on-demand</li>
                        <li>CDN caching (99% hit rate)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Search -->
        <div class="section search-section">
            <div class="section-title">üîç SEARCH & DISCOVERY</div>
            <div class="component">
                <div class="component-name">Elasticsearch</div>
                <div class="component-details">
                    <strong>Indexed Data:</strong>
                    <ul>
                        <li>User profiles (username, bio)</li>
                        <li>Post content (text, hashtags)</li>
                        <li>Comments</li>
                        <li>Trending topics</li>
                    </ul>
                    <div class="code-snippet">
// Elasticsearch Query
GET /posts/_search
{
  "query": {
    "multi_match": {
      "query": "machine learning",
      "fields": ["content", "hashtags"]
    }
  },
  "sort": [
    { "engagement_score": "desc" },
    { "created_at": "desc" }
  ]
}</div>
                    <strong>Features:</strong>
                    <ul>
                        <li>Full-text search</li>
                        <li>Autocomplete</li>
                        <li>Fuzzy matching</li>
                        <li>Faceted search</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Analytics -->
        <div class="section analytics-section">
            <div class="section-title">üìä ANALYTICS & METRICS</div>
            <div class="component">
                <div class="component-name">ClickHouse / BigQuery</div>
                <div class="component-details">
                    <strong>Tracked Events:</strong>
                    <ul>
                        <li>Post impressions</li>
                        <li>Likes, comments, shares</li>
                        <li>Follow/unfollow events</li>
                        <li>Time spent on posts</li>
                        <li>Click-through rates</li>
                    </ul>
                    <div class="code-snippet">
-- ClickHouse Schema
CREATE TABLE post_events (
  event_id UUID,
  user_id UInt64,
  post_id UInt64,
  event_type Enum('view', 'like', 'comment', 'share'),
  timestamp DateTime,
  device_type String,
  location String
) ENGINE = MergeTree()
PARTITION BY toYYYYMM(timestamp)
ORDER BY (post_id, timestamp);</div>
                    <strong>Real-time Aggregations:</strong>
                    <ul>
                        <li>Trending posts (last 1 hour)</li>
                        <li>Viral content detection</li>
                        <li>User engagement metrics</li>
                        <li>A/B test results</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Message Queue -->
        <div class="section queue-section">
            <div class="section-title">üì¨ MESSAGE QUEUE</div>
            <div class="component">
                <div class="component-name">Apache Kafka / RabbitMQ</div>
                <div class="component-details">
                    <strong>Event Topics:</strong>
                    <ul>
                        <li><strong>post.created:</strong> New post published</li>
                        <li><strong>post.liked:</strong> Like event</li>
                        <li><strong>user.followed:</strong> Follow event</li>
                        <li><strong>comment.added:</strong> New comment</li>
                        <li><strong>notification.trigger:</strong> Send notification</li>
                        <li><strong>feed.update:</strong> Feed needs refresh</li>
                    </ul>
                    <div class="code-snippet">
// Kafka Event Example
{
  "eventType": "post.created",
  "postId": "12345",
  "authorId": "67890",
  "timestamp": "2025-11-14T10:30:00Z",
  "metadata": {
    "content": "Check out my new blog!",
    "mediaUrls": ["https://cdn.../image.jpg"],
    "hashtags": ["#tech", "#blog"]
  }
}</div>
                    <strong>Consumer Groups:</strong>
                    <ul>
                        <li>Feed generator</li>
                        <li>Notification service</li>
                        <li>Analytics processor</li>
                        <li>Search indexer</li>
                        <li>ML recommendation engine</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Monitoring -->
        <div class="section monitoring-section">
            <div class="section-title">üìà MONITORING, LOGGING & OBSERVABILITY</div>

            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                <div class="component">
                    <div class="component-name">Prometheus + Grafana</div>
                    <div class="component-details">
                        <strong>Metrics:</strong>
                        <ul>
                            <li>Request rate (QPS)</li>
                            <li>Latency (P50, P95, P99)</li>
                            <li>Error rate</li>
                            <li>Cache hit ratio</li>
                            <li>DB connections</li>
                            <li>Feed generation time</li>
                        </ul>
                    </div>
                </div>

                <div class="component">
                    <div class="component-name">ELK Stack (Logging)</div>
                    <div class="component-details">
                        <strong>Logs:</strong>
                        <ul>
                            <li>Application logs</li>
                            <li>Error tracking</li>
                            <li>Audit trails</li>
                            <li>Security events</li>
                            <li>User actions</li>
                        </ul>
                    </div>
                </div>

                <div class="component">
                    <div class="component-name">Distributed Tracing (Jaeger)</div>
                    <div class="component-details">
                        <strong>Traces:</strong>
                        <ul>
                            <li>Request flow across services</li>
                            <li>Latency breakdown</li>
                            <li>Bottleneck identification</li>
                            <li>Dependency mapping</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Key System Metrics -->
    <div class="key-metrics">
        <div class="section-title">üéØ KEY SYSTEM METRICS & SCALE</div>
        <div class="metrics-grid">
            <div class="metric-item">
                <div class="metric-value">2 Billion</div>
                <div class="metric-label">Monthly Active Users (Facebook scale)</div>
            </div>
            <div class="metric-item">
                <div class="metric-value">500M</div>
                <div class="metric-label">Daily Active Users</div>
            </div>
            <div class="metric-item">
                <div class="metric-value">100K QPS</div>
                <div class="metric-label">Read throughput (feed requests)</div>
            </div>
            <div class="metric-item">
                <div class="metric-value">10K QPS</div>
                <div class="metric-label">Write throughput (posts, likes)</div>
            </div>
            <div class="metric-item">
                <div class="metric-value">&lt;100ms</div>
                <div class="metric-label">P95 API latency</div>
            </div>
            <div class="metric-item">
                <div class="metric-value">&lt;500ms</div>
                <div class="metric-label">Feed generation time</div>
            </div>
            <div class="metric-item">
                <div class="metric-value">99.99%</div>
                <div class="metric-label">Availability SLA</div>
            </div>
            <div class="metric-item">
                <div class="metric-value">10+ PB</div>
                <div class="metric-label">Total storage (media + data)</div>
            </div>
        </div>
    </div>

    <!-- Additional Details -->
    <div style="margin-top: 40px; padding: 30px; background: #f8fafc; border-radius: 15px; border: 2px solid #e2e8f0;">
        <h2 style="color: #2d3748; margin-bottom: 20px;">üîê CRITICAL SYSTEM CONSIDERATIONS</h2>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 25px;">
            <div>
                <h3 style="color: #6366f1; margin-bottom: 10px;">Feed Generation Strategies</h3>
                <ul style="line-height: 2; color: #4a5568;">
                    <li><strong>Fan-out on Write (Twitter):</strong> Pre-compute timelines when post created. Fast reads, slow writes for influencers</li>
                    <li><strong>Fan-out on Read (Instagram):</strong> Generate timeline on request. Slow reads, fast writes, better for influencers</li>
                    <li><strong>Hybrid (Facebook):</strong> Pre-compute for normal users, on-demand for celebrities (>1M followers)</li>
                </ul>
            </div>

            <div>
                <h3 style="color: #6366f1; margin-bottom: 10px;">Scalability Patterns</h3>
                <ul style="line-height: 2; color: #4a5568;">
                    <li><strong>Horizontal Scaling:</strong> Stateless services, auto-scaling (1K-10K instances)</li>
                    <li><strong>Database Sharding:</strong> Hash-based sharding by user_id, post_id</li>
                    <li><strong>Read Replicas:</strong> 10-50 replicas per master for read-heavy workload</li>
                    <li><strong>Caching:</strong> Multi-tier (CDN, Redis, Application)</li>
                    <li><strong>Async Processing:</strong> Event-driven architecture for non-critical paths</li>
                </ul>
            </div>

            <div>
                <h3 style="color: #6366f1; margin-bottom: 10px;">Data Consistency</h3>
                <ul style="line-height: 2; color: #4a5568;">
                    <li><strong>Posts/Comments:</strong> Eventual consistency acceptable (seconds delay OK)</li>
                    <li><strong>Likes/Reactions:</strong> Eventually consistent counts</li>
                    <li><strong>Follows:</strong> Strong consistency required</li>
                    <li><strong>Payments/Ads:</strong> Strong ACID transactions</li>
                </ul>
            </div>

            <div>
                <h3 style="color: #6366f1; margin-bottom: 10px;">Security & Privacy</h3>
                <ul style="line-height: 2; color: #4a5568;">
                    <li><strong>Authentication:</strong> JWT tokens, OAuth 2.0, 2FA</li>
                    <li><strong>Authorization:</strong> RBAC, privacy settings (public/friends/private)</li>
                    <li><strong>Content Moderation:</strong> AI/ML spam detection, human review</li>
                    <li><strong>Data Privacy:</strong> GDPR compliance, user data deletion</li>
                    <li><strong>Rate Limiting:</strong> Prevent spam, abuse, DDoS</li>
                </ul>
            </div>

            <div>
                <h3 style="color: #6366f1; margin-bottom: 10px;">Performance Optimizations</h3>
                <ul style="line-height: 2; color: #4a5568;">
                    <li><strong>Image Optimization:</strong> WebP, AVIF, lazy loading</li>
                    <li><strong>Video Streaming:</strong> HLS, DASH, adaptive bitrate</li>
                    <li><strong>Pagination:</strong> Cursor-based for infinite scroll</li>
                    <li><strong>GraphQL:</strong> Batching, DataLoader for N+1 queries</li>
                    <li><strong>CDN:</strong> Global distribution, 99% cache hit rate</li>
                </ul>
            </div>

            <div>
                <h3 style="color: #6366f1; margin-bottom: 10px;">Failure Scenarios & Recovery</h3>
                <ul style="line-height: 2; color: #4a5568;">
                    <li><strong>Database Failover:</strong> Auto-promote replica (RTO: 30s)</li>
                    <li><strong>Cache Failure:</strong> Circuit breaker, fallback to DB</li>
                    <li><strong>Service Failure:</strong> Health checks, auto-restart, retry logic</li>
                    <li><strong>Region Failure:</strong> Multi-region active-active (RTO: 5 min)</li>
                    <li><strong>Data Loss:</strong> Continuous backups, PITR, replication</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid #e2e8f0; color: #718096;">
        <p style="font-size: 0.9em;">üí° <strong>Social Graphs at Scale:</strong> Designing for billions of users requires trade-offs between consistency, availability, and latency</p>
        <p style="font-size: 0.9em; margin-top: 10px;">Built with: Java/Spring Boot ‚Ä¢ Go ‚Ä¢ Python ‚Ä¢ PostgreSQL ‚Ä¢ Cassandra ‚Ä¢ Redis ‚Ä¢ Kafka ‚Ä¢ Kubernetes ‚Ä¢ React</p>
    </div>
</div>
</body>
</html>
