<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TicketMaster System Design Blueprint</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #7c2d12 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #2563eb;
        }

        .header h1 {
            font-size: 2.5em;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 1.3em;
            color: #2563eb;
            font-weight: 600;
        }

        .tags {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .tag {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
        }

        .tag.scale { background: #dbeafe; color: #1e40af; }
        .tag.consistency { background: #fee2e2; color: #991b1b; }
        .tag.realtime { background: #fef3c7; color: #92400e; }

        .architecture {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .section {
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e2e8f0;
            position: relative;
            min-height: 200px;
        }

        .section-title {
            font-weight: 700;
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #1a202c;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .component {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border: 2px solid #cbd5e0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .component:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        .component-name {
            font-weight: 700;
            font-size: 1em;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .component-details {
            font-size: 0.85em;
            color: #4a5568;
            line-height: 1.6;
        }

        .component-details ul {
            margin-left: 15px;
            margin-top: 5px;
        }

        .component-details li {
            margin: 3px 0;
        }

        /* Color themes for different sections */
        .cdn-section {
            background: linear-gradient(135deg, #fde68a 0%, #fbbf24 100%);
            grid-column: span 3;
        }

        .client-section {
            background: linear-gradient(135deg, #bfdbfe 0%, #60a5fa 100%);
            grid-column: span 3;
        }

        .gateway-section {
            background: linear-gradient(135deg, #a5f3fc 0%, #22d3ee 100%);
            grid-column: span 6;
        }

        .loadbalancer-section {
            background: linear-gradient(135deg, #c7d2fe 0%, #818cf8 100%);
            grid-column: span 4;
        }

        .queue-section {
            background: linear-gradient(135deg, #fca5a5 0%, #ef4444 100%);
            grid-column: span 8;
        }

        .api-section {
            background: linear-gradient(135deg, #fecaca 0%, #f87171 100%);
            grid-column: span 12;
        }

        .booking-section {
            background: linear-gradient(135deg, #d9f99d 0%, #84cc16 100%);
            grid-column: span 6;
        }

        .payment-section {
            background: linear-gradient(135deg, #fde047 0%, #facc15 100%);
            grid-column: span 6;
        }

        .search-section {
            background: linear-gradient(135deg, #fbcfe8 0%, #f472b6 100%);
            grid-column: span 4;
        }

        .inventory-section {
            background: linear-gradient(135deg, #fed7aa 0%, #fb923c 100%);
            grid-column: span 4;
        }

        .database-section {
            background: linear-gradient(135deg, #fed7aa 0%, #fb923c 100%);
            grid-column: span 6;
        }

        .cache-section {
            background: linear-gradient(135deg, #fbcfe8 0%, #f472b6 100%);
            grid-column: span 6;
        }

        .analytics-section {
            background: linear-gradient(135deg, #e9d5ff 0%, #c084fc 100%);
            grid-column: span 6;
        }

        .notification-section {
            background: linear-gradient(135deg, #99f6e4 0%, #2dd4bf 100%);
            grid-column: span 6;
        }

        .monitoring-section {
            background: linear-gradient(135deg, #99f6e4 0%, #2dd4bf 100%);
            grid-column: span 4;
        }

        .storage-section {
            background: linear-gradient(135deg, #bae6fd 0%, #38bdf8 100%);
            grid-column: span 4;
        }

        .flow-indicator {
            font-size: 0.75em;
            color: #2563eb;
            font-weight: 600;
            margin: 10px 0;
            padding: 5px 10px;
            background: rgba(37, 99, 235, 0.1);
            border-radius: 5px;
            display: inline-block;
        }

        .key-metrics {
            background: #fef3c7;
            padding: 15px;
            border-radius: 10px;
            margin-top: 30px;
            border: 2px solid #fbbf24;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .metric-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #2563eb;
        }

        .metric-value {
            font-size: 1.5em;
            font-weight: 700;
            color: #2563eb;
        }

        .metric-label {
            font-size: 0.9em;
            color: #4a5568;
            margin-top: 5px;
        }

        .code-snippet {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            margin-top: 10px;
            overflow-x: auto;
        }

        .highlight {
            color: #fbbf24;
            font-weight: 600;
        }

        @media (max-width: 1400px) {
            .architecture {
                grid-template-columns: repeat(6, 1fr);
            }
            .section { grid-column: span 6 !important; }
        }

        @media (max-width: 768px) {
            .architecture {
                grid-template-columns: 1fr;
            }
            .section { grid-column: span 1 !important; }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>üé´ TicketMaster System Design Blueprint</h1>
        <div class="subtitle">High-Scale Event Ticketing Platform Architecture</div>
        <div class="tags">
            <span class="tag scale">High Concurrency</span>
            <span class="tag consistency">Strong Consistency</span>
            <span class="tag realtime">Real-time Inventory</span>
        </div>
    </div>

    <div class="architecture">
        <!-- Client Layer -->
        <div class="section client-section">
            <div class="section-title">üë• CLIENT LAYER</div>
            <div class="component">
                <div class="component-name">Web/Mobile/API Clients</div>
                <div class="component-details">
                    <strong>Request Types:</strong>
                    <ul>
                        <li>GET /events (search)</li>
                        <li>GET /events/{id}/seats</li>
                        <li>POST /bookings (reserve)</li>
                        <li>POST /payments</li>
                        <li>GET /tickets/{id}</li>
                    </ul>
                </div>
            </div>
            <div class="flow-indicator">‚Üì HTTPS Request</div>
        </div>

        <!-- CDN Layer -->
        <div class="section cdn-section">
            <div class="section-title">‚ö° CDN / EDGE</div>
            <div class="component">
                <div class="component-name">CloudFront / Akamai</div>
                <div class="component-details">
                    <ul>
                        <li><strong>Static content:</strong> Images, event posters, venue maps</li>
                        <li><strong>API caching:</strong> Event listings, venue info (short TTL)</li>
                        <li><strong>DDoS protection:</strong> AWS Shield, rate limiting</li>
                        <li><strong>Geo-distribution:</strong> Global edge locations</li>
                        <li><strong>Edge compute:</strong> Bot detection, A/B testing</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Virtual Waiting Room -->
        <div class="section queue-section">
            <div class="section-title">‚è≥ VIRTUAL WAITING ROOM</div>
            <div class="component">
                <div class="component-name">Queue-It / Custom Queue System</div>
                <div class="component-details">
                    <strong>For High-Demand Events:</strong>
                    <div class="code-snippet">
// Fair queuing mechanism
When event opens:
1. User gets queue token with position
2. Periodic position updates (websocket)
3. Throttled admission to booking flow
4. Rate: 1000 users/min to prevent surge
                    </div>
                    <strong>Features:</strong>
                    <ul>
                        <li>Random queue assignment (prevent bots)</li>
                        <li>Token-based session management</li>
                        <li>Real-time queue position updates</li>
                        <li>Auto-expire inactive sessions (5 min)</li>
                        <li>Priority lanes for verified users</li>
                    </ul>
                </div>
            </div>
            <div class="flow-indicator">‚Üì Throttled Access</div>
        </div>

        <!-- Load Balancer -->
        <div class="section loadbalancer-section">
            <div class="section-title">‚öñÔ∏è LOAD BALANCING</div>
            <div class="component">
                <div class="component-name">Application Load Balancer</div>
                <div class="component-details">
                    <strong>Algorithms:</strong>
                    <ul>
                        <li>Least Outstanding Requests</li>
                        <li>Session affinity (for booking flow)</li>
                        <li>Health checks (every 10s)</li>
                    </ul>
                    <strong>Auto-scaling:</strong>
                    <ul>
                        <li>Scale on CPU > 70%</li>
                        <li>Pre-warm for event releases</li>
                        <li>Min: 10, Max: 500 instances</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- API Gateway -->
        <div class="section api-section">
            <div class="section-title">üö™ API GATEWAY & MICROSERVICES</div>
            <div class="component">
                <div class="component-name">Kong / AWS API Gateway</div>
                <div class="component-details">
                    <strong>Responsibilities:</strong>
                    <ul>
                        <li><strong>Authentication:</strong> OAuth2, JWT tokens, API keys</li>
                        <li><strong>Rate Limiting:</strong>
                            <div class="code-snippet">
Free users: 100 req/min
Premium: 1000 req/min
Bot protection: CAPTCHA after 5 failures</div>
                        </li>
                        <li><strong>Request routing:</strong> Service mesh (Istio)</li>
                        <li><strong>Circuit breaker:</strong> Fail fast on downstream errors</li>
                        <li><strong>Request validation:</strong> Schema validation, sanitization</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Booking Service -->
        <div class="section booking-section">
            <div class="section-title">üéüÔ∏è BOOKING SERVICE</div>
            <div class="component">
                <div class="component-name">Seat Reservation Engine</div>
                <div class="component-details">
                    <strong>Java/Spring Boot + Redis Distributed Lock</strong>
                    <div class="code-snippet">
POST /api/v1/bookings
{
  "eventId": "evt-123",
  "seatIds": ["A-101", "A-102"],
  "userId": "user-456"
}

Flow:
1. Acquire distributed lock (Redis)
2. Check seat availability (DB)
3. Reserve seats (10min hold)
4. Return booking reference
5. Release lock
                    </div>
                    <strong>Key Features:</strong>
                    <ul>
                        <li><strong>Pessimistic locking:</strong> Prevent double booking</li>
                        <li><strong>Timeout mechanism:</strong> Auto-release after 10 min</li>
                        <li><strong>Idempotency:</strong> Duplicate request handling</li>
                        <li><strong>ACID transactions:</strong> DB consistency</li>
                        <li><strong>Waitlist management:</strong> Queue for sold-out events</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Payment Service -->
        <div class="section payment-section">
            <div class="section-title">üí≥ PAYMENT SERVICE</div>
            <div class="component">
                <div class="component-name">Payment Gateway Integration</div>
                <div class="component-details">
                    <strong>Stripe / PayPal / Braintree</strong>
                    <div class="code-snippet">
Payment Flow:
1. Create payment intent (Stripe API)
2. User completes 3D Secure
3. Capture payment
4. On success ‚Üí Confirm booking
5. On failure ‚Üí Release seats
6. Send confirmation email
                    </div>
                    <strong>Reliability Features:</strong>
                    <ul>
                        <li><strong>Retry logic:</strong> Exponential backoff (3 attempts)</li>
                        <li><strong>Webhook handling:</strong> Payment status updates</li>
                        <li><strong>Reconciliation job:</strong> Daily payment audit</li>
                        <li><strong>Refund processing:</strong> Async with compensation</li>
                        <li><strong>PCI compliance:</strong> Tokenization, no card storage</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Search Service -->
        <div class="section search-section">
            <div class="section-title">üîç SEARCH SERVICE</div>
            <div class="component">
                <div class="component-name">Elasticsearch Cluster</div>
                <div class="component-details">
                    <strong>Event Search & Filters:</strong>
                    <ul>
                        <li>Full-text search (artist, venue, city)</li>
                        <li>Geo-spatial queries (events near me)</li>
                        <li>Faceted search (category, date, price)</li>
                        <li>Autocomplete suggestions</li>
                        <li>Relevance ranking</li>
                    </ul>
                    <div class="code-snippet">
GET /api/v1/events/search?
  q=concert&
  city=new-york&
  date_from=2025-12-01&
  price_max=150
                    </div>
                </div>
            </div>
        </div>

        <!-- Inventory Service -->
        <div class="section inventory-section">
            <div class="section-title">üìä INVENTORY SERVICE</div>
            <div class="component">
                <div class="component-name">Real-time Seat Management</div>
                <div class="component-details">
                    <strong>Seat States:</strong>
                    <ul>
                        <li><code>AVAILABLE</code>: Can be booked</li>
                        <li><code>RESERVED</code>: Held for 10min</li>
                        <li><code>SOLD</code>: Payment confirmed</li>
                        <li><code>BLOCKED</code>: Maintenance/VIP</li>
                    </ul>
                    <strong>Dynamic Pricing:</strong>
                    <div class="code-snippet">
Demand-based pricing:
- High demand ‚Üí Increase 20-30%
- Low sales ‚Üí Discount 10-15%
- ML model predicts optimal price
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification Service -->
        <div class="section notification-section">
            <div class="section-title">üîî NOTIFICATION SERVICE</div>
            <div class="component">
                <div class="component-name">Multi-Channel Notifications</div>
                <div class="component-details">
                    <strong>Channels:</strong>
                    <ul>
                        <li><strong>Email:</strong> SendGrid (booking confirmation, tickets)</li>
                        <li><strong>SMS:</strong> Twilio (event reminders, updates)</li>
                        <li><strong>Push:</strong> Firebase (app notifications)</li>
                        <li><strong>Webhooks:</strong> Partner integrations</li>
                    </ul>
                    <strong>Triggered Events:</strong>
                    <ul>
                        <li>Booking confirmed ‚Üí Send ticket email</li>
                        <li>Event tomorrow ‚Üí Send reminder SMS</li>
                        <li>Payment failed ‚Üí Retry notification</li>
                        <li>Seat available ‚Üí Waitlist notification</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Database -->
        <div class="section database-section">
            <div class="section-title">üóÑÔ∏è DATABASE LAYER</div>
            <div class="component">
                <div class="component-name">PostgreSQL (Primary)</div>
                <div class="component-details">
                    <strong>Schema Design:</strong>
                    <div class="code-snippet">
-- Events Table
CREATE TABLE events (
  id UUID PRIMARY KEY,
  name VARCHAR(255),
  venue_id UUID,
  event_date TIMESTAMP,
  total_seats INT,
  available_seats INT,
  created_at TIMESTAMP
);

-- Seats Table
CREATE TABLE seats (
  id UUID PRIMARY KEY,
  event_id UUID,
  section VARCHAR(50),
  row VARCHAR(10),
  seat_number VARCHAR(10),
  price DECIMAL(10,2),
  status VARCHAR(20), -- AVAILABLE, RESERVED, SOLD
  reserved_until TIMESTAMP,
  UNIQUE(event_id, section, row, seat_number)
);

CREATE INDEX idx_seats_event_status ON seats(event_id, status);
CREATE INDEX idx_seats_reserved ON seats(reserved_until)
  WHERE status = 'RESERVED';

-- Bookings Table
CREATE TABLE bookings (
  id UUID PRIMARY KEY,
  user_id UUID,
  event_id UUID,
  seat_ids UUID[],
  total_amount DECIMAL(10,2),
  status VARCHAR(20),
  created_at TIMESTAMP,
  expires_at TIMESTAMP
);
                    </div>
                    <strong>Sharding Strategy:</strong>
                    <ul>
                        <li><strong>Horizontal sharding</strong> by event_id</li>
                        <li>16 shards initially (event hash mod 16)</li>
                        <li>Read replicas for reporting queries</li>
                    </ul>
                </div>
            </div>

            <div class="component">
                <div class="component-name">Cassandra (Analytics)</div>
                <div class="component-details">
                    <ul>
                        <li>Time-series data (click streams, views)</li>
                        <li>User activity logs</li>
                        <li>Event popularity metrics</li>
                        <li>High write throughput (100K writes/sec)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Cache Layer -->
        <div class="section cache-section">
            <div class="section-title">üíæ CACHE LAYER</div>
            <div class="component">
                <div class="component-name">Redis Cluster</div>
                <div class="component-details">
                    <strong>Use Cases:</strong>
                    <ul>
                        <li><strong>Distributed locks:</strong> Seat reservation (Redlock)</li>
                        <li><strong>Session storage:</strong> User sessions, booking state</li>
                        <li><strong>Rate limiting:</strong> Token bucket counters</li>
                        <li><strong>Hot event data:</strong> Popular events, seat maps</li>
                        <li><strong>Queue positions:</strong> Virtual waiting room state</li>
                    </ul>
                    <div class="code-snippet">
# Distributed Lock Pattern
SETNX lock:seat:A-101 booking-uuid EX 30
# Seat availability cache
GET event:123:available_seats
# Rate limit check
INCR ratelimit:user:456:minute
EXPIRE ratelimit:user:456:minute 60
                    </div>
                    <strong>Architecture:</strong>
                    <ul>
                        <li>3 master nodes, 3 replicas</li>
                        <li>Cluster mode for partitioning</li>
                        <li>Sentinel for high availability</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Analytics -->
        <div class="section analytics-section">
            <div class="section-title">üìä ANALYTICS & BI</div>
            <div class="component">
                <div class="component-name">Data Warehouse</div>
                <div class="component-details">
                    <strong>Snowflake / BigQuery</strong>
                    <ul>
                        <li>Sales analytics (revenue, conversion)</li>
                        <li>User behavior analysis</li>
                        <li>Event performance metrics</li>
                        <li>Fraud detection models</li>
                        <li>Dynamic pricing optimization</li>
                    </ul>
                    <div class="code-snippet">
-- ETL Pipeline (Apache Airflow)
1. Extract from PostgreSQL (CDC via Debezium)
2. Transform (clean, aggregate)
3. Load to Snowflake (hourly batches)
4. ML models train on historical data
                    </div>
                </div>
            </div>

            <div class="component">
                <div class="component-name">Real-time Analytics</div>
                <div class="component-details">
                    <strong>Apache Flink / Kafka Streams</strong>
                    <ul>
                        <li>Live dashboard (seats sold, revenue)</li>
                        <li>Anomaly detection (bot traffic)</li>
                        <li>Trending events</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Message Queue -->
        <div class="section queue-section">
            <div class="section-title">üì¨ MESSAGE QUEUE</div>
            <div class="component">
                <div class="component-name">Apache Kafka</div>
                <div class="component-details">
                    <strong>Topics:</strong>
                    <ul>
                        <li><strong>booking.created:</strong> New booking initiated</li>
                        <li><strong>booking.confirmed:</strong> Payment successful</li>
                        <li><strong>booking.cancelled:</strong> Timeout or user cancel</li>
                        <li><strong>payment.completed:</strong> Payment webhook events</li>
                        <li><strong>seat.released:</strong> Seat back to inventory</li>
                        <li><strong>notification.send:</strong> Email/SMS triggers</li>
                    </ul>
                    <div class="code-snippet">
// Event-Driven Architecture
{
  "eventType": "booking.confirmed",
  "bookingId": "bkg-789",
  "userId": "user-456",
  "eventId": "evt-123",
  "seats": ["A-101", "A-102"],
  "amount": 150.00,
  "timestamp": "2025-11-15T10:30:00Z"
}

Consumers:
- Notification Service (send email/SMS)
- Analytics Service (update metrics)
- Inventory Service (mark seats SOLD)
- Ticket Generator (create QR codes)
                    </div>
                </div>
            </div>
        </div>

        <!-- Monitoring -->
        <div class="section monitoring-section">
            <div class="section-title">üìà MONITORING</div>
            <div class="component">
                <div class="component-name">Observability Stack</div>
                <div class="component-details">
                    <strong>Metrics: Prometheus + Grafana</strong>
                    <ul>
                        <li>Booking success rate</li>
                        <li>Payment latency (P95, P99)</li>
                        <li>Seat lock contention</li>
                        <li>Queue wait times</li>
                    </ul>
                    <strong>Logging: ELK Stack</strong>
                    <ul>
                        <li>Centralized logs</li>
                        <li>Error tracking</li>
                        <li>Audit trails</li>
                    </ul>
                    <strong>Tracing: Jaeger</strong>
                    <ul>
                        <li>Distributed tracing</li>
                        <li>End-to-end latency</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Object Storage -->
        <div class="section storage-section">
            <div class="section-title">‚òÅÔ∏è OBJECT STORAGE</div>
            <div class="component">
                <div class="component-name">Amazon S3 / CloudFront</div>
                <div class="component-details">
                    <strong>Use Cases:</strong>
                    <ul>
                        <li><strong>Ticket PDFs:</strong> Generated tickets with QR codes</li>
                        <li><strong>Event images:</strong> Posters, venue photos</li>
                        <li><strong>Venue maps:</strong> Interactive seat maps (SVG)</li>
                        <li><strong>Backups:</strong> Daily database snapshots</li>
                        <li><strong>Logs archive:</strong> Long-term log storage</li>
                    </ul>
                    <strong>Optimization:</strong>
                    <ul>
                        <li>CloudFront CDN for global delivery</li>
                        <li>Lifecycle policies (S3 ‚Üí Glacier after 90 days)</li>
                        <li>Signed URLs for ticket access</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Key System Metrics -->
    <div class="key-metrics">
        <div class="section-title">üéØ KEY SYSTEM METRICS & CAPACITY PLANNING</div>
        <div class="metrics-grid">
            <div class="metric-item">
                <div class="metric-value">100K</div>
                <div class="metric-label">Concurrent users (peak event release)</div>
            </div>
            <div class="metric-item">
                <div class="metric-value">10K</div>
                <div class="metric-label">Bookings per minute (peak)</div>
            </div>
            <div class="metric-item">
                <div class="metric-value">500M</div>
                <div class="metric-label">Events searchable in catalog</div>
            </div>
            <div class="metric-item">
                <div class="metric-value">&lt;200ms</div>
                <div class="metric-label">P95 booking latency</div>
            </div>
            <div class="metric-item">
                <div class="metric-value">99.95%</div>
                <div class="metric-label">Availability SLA</div>
            </div>
            <div class="metric-item">
                <div class="metric-value">0%</div>
                <div class="metric-label">Double booking rate (ACID guarantees)</div>
            </div>
        </div>
    </div>

    <!-- Additional Details -->
    <div style="margin-top: 40px; padding: 30px; background: #f8fafc; border-radius: 15px; border: 2px solid #e2e8f0;">
        <h2 style="color: #2d3748; margin-bottom: 20px;">üîê CRITICAL SYSTEM CONSIDERATIONS</h2>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 25px;">
            <div>
                <h3 style="color: #2563eb; margin-bottom: 10px;">Concurrency Control</h3>
                <ul style="line-height: 2; color: #4a5568;">
                    <li><strong>Pessimistic Locking:</strong> Redis distributed locks (Redlock algorithm)</li>
                    <li><strong>Optimistic Locking:</strong> Version columns for update conflicts</li>
                    <li><strong>Timeout Management:</strong> Auto-release seats after 10 minutes</li>
                    <li><strong>Idempotency Keys:</strong> Prevent duplicate bookings</li>
                    <li><strong>Transaction Isolation:</strong> SERIALIZABLE for critical paths</li>
                </ul>
            </div>

            <div>
                <h3 style="color: #2563eb; margin-bottom: 10px;">Scalability Strategies</h3>
                <ul style="line-height: 2; color: #4a5568;">
                    <li><strong>Horizontal Scaling:</strong> Auto-scaling groups (10-500 instances)</li>
                    <li><strong>Database Sharding:</strong> By event_id for write distribution</li>
                    <li><strong>Cache-Aside Pattern:</strong> Redis for hot event data</li>
                    <li><strong>Queue System:</strong> Virtual waiting room for traffic shaping</li>
                    <li><strong>Read Replicas:</strong> 5+ replicas for reporting queries</li>
                    <li><strong>Event Sourcing:</strong> Audit trail and state reconstruction</li>
                </ul>
            </div>

            <div>
                <h3 style="color: #2563eb; margin-bottom: 10px;">Anti-Fraud & Security</h3>
                <ul style="line-height: 2; color: #4a5568;">
                    <li><strong>Bot Detection:</strong> CAPTCHA, device fingerprinting, rate limits</li>
                    <li><strong>Scalper Prevention:</strong> Limit per user, verified accounts</li>
                    <li><strong>Payment Security:</strong> PCI-DSS compliance, tokenization</li>
                    <li><strong>API Security:</strong> OAuth2, JWT, API key rotation</li>
                    <li><strong>DDoS Protection:</strong> CloudFlare, AWS Shield, WAF rules</li>
                </ul>
            </div>

            <div>
                <h3 style="color: #2563eb; margin-bottom: 10px;">Failure Scenarios & Recovery</h3>
                <ul style="line-height: 2; color: #4a5568;">
                    <li><strong>Payment Failure:</strong> Retry logic + seat release + notification</li>
                    <li><strong>Database Failover:</strong> Auto-promote replica (30s RTO)</li>
                    <li><strong>Cache Failure:</strong> Fallback to database + circuit breaker</li>
                    <li><strong>Service Failure:</strong> Kubernetes auto-restart, health probes</li>
                    <li><strong>Data Consistency:</strong> Saga pattern for distributed transactions</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Domain-Driven Design -->
    <div style="margin-top: 30px; padding: 30px; background: linear-gradient(135deg, #dbeafe 0%, #93c5fd 100%); border-radius: 15px;">
        <h2 style="color: #1e40af; margin-bottom: 20px;">üé® DOMAIN-DRIVEN DESIGN MAPPING</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
            <div style="background: white; padding: 20px; border-radius: 10px; border-left: 5px solid #2563eb;">
                <h4 style="color: #2563eb; margin-bottom: 10px;">Booking Context</h4>
                <p style="color: #4a5568; line-height: 1.8;">
                    <strong>Aggregates:</strong> Booking, Seat<br>
                    <strong>Entities:</strong> Reservation, Payment<br>
                    <strong>Value Objects:</strong> BookingId, SeatNumber, Price<br>
                    <strong>Domain Events:</strong> BookingCreated, PaymentCompleted, SeatReleased<br>
                    <strong>Repository:</strong> BookingRepository
                </p>
            </div>

            <div style="background: white; padding: 20px; border-radius: 10px; border-left: 5px solid #10b981;">
                <h4 style="color: #10b981; margin-bottom: 10px;">Inventory Context</h4>
                <p style="color: #4a5568; line-height: 1.8;">
                    <strong>Aggregates:</strong> Event, Venue<br>
                    <strong>Entities:</strong> Seat, Section<br>
                    <strong>Value Objects:</strong> SeatStatus, Coordinates<br>
                    <strong>Domain Events:</strong> SeatReserved, SeatSold, EventCreated<br>
                    <strong>Repository:</strong> InventoryRepository
                </p>
            </div>

            <div style="background: white; padding: 20px; border-radius: 10px; border-left: 5px solid #f59e0b;">
                <h4 style="color: #f59e0b; margin-bottom: 10px;">Payment Context</h4>
                <p style="color: #4a5568; line-height: 1.8;">
                    <strong>Aggregates:</strong> Payment, Transaction<br>
                    <strong>Entities:</strong> PaymentMethod, Refund<br>
                    <strong>Value Objects:</strong> Money, Currency<br>
                    <strong>Domain Events:</strong> PaymentAuthorized, PaymentFailed, RefundIssued<br>
                    <strong>Repository:</strong> PaymentRepository
                </p>
            </div>

            <div style="background: white; padding: 20px; border-radius: 10px; border-left: 5px solid #ec4899;">
                <h4 style="color: #ec4899; margin-bottom: 10px;">User Context</h4>
                <p style="color: #4a5568; line-height: 1.8;">
                    <strong>Aggregates:</strong> User, Account<br>
                    <strong>Entities:</strong> Profile, Preferences<br>
                    <strong>Value Objects:</strong> Email, UserId<br>
                    <strong>Domain Events:</strong> UserRegistered, ProfileUpdated<br>
                    <strong>Repository:</strong> UserRepository
                </p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid #e2e8f0; color: #718096;">
        <p style="font-size: 0.9em;">üé´ <strong>TicketMaster-Scale Architecture:</strong> Built to handle millions of concurrent users and prevent double bookings</p>
        <p style="font-size: 0.9em; margin-top: 10px;">Tech Stack: Java/Spring Boot ‚Ä¢ PostgreSQL ‚Ä¢ Redis ‚Ä¢ Kafka ‚Ä¢ Elasticsearch ‚Ä¢ Kubernetes ‚Ä¢ AWS</p>
    </div>
</div>
</body>
</html>
